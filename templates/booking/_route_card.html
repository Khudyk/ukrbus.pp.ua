<div class="glass-card w-100 mb-4 shadow-sm border-0 position-relative {% if route.is_boosted %}top-boosted-card{% endif %} route-horizontal-wrapper">

    {% if route.is_boosted %}
    <div class="position-absolute top-0 end-0 m-3" style="z-index: 5;">
        <span class="badge rounded-pill bg-primary shadow-glow px-3 py-2">
            <i class="fas fa-crown text-warning me-1"></i> TOP
        </span>
    </div>
    {% endif %}

    <div class="row g-0 align-items-stretch">
        <div class="col-lg-8 p-4 d-flex flex-column justify-content-center">
            <div class="d-flex justify-content-between align-items-center text-center px-md-4">

                <div class="departure text-start">
                    <div class="h1 text-white fw-bold mb-0"> {% with s=route.stops.all|dictsort:"order"|first %}{{ s.departure_time|time:"H:i" }}{% endwith %}
                    </div>
                    <div class="text-white h5 mb-1 fw-bold text-uppercase">
                        {{ request.GET.start_city|default:route.stops.all.0.city.name }}
                    </div>
                    <div class="text-white-50 small">
                        <i class="far fa-calendar-alt me-1"></i> {% if request.GET.date %}{{ request.GET.date }}{% else %}Сьогодні{% endif %}
                    </div>
                </div>



                <div class="arrival text-end">
                    <div class="h1 text-white fw-bold mb-0"> {% with s=route.stops.all|dictsort:"order"|last %}{{ s.departure_time|time:"H:i" }}{% endwith %}
                    </div>
                    <div class="text-white h5 mb-1 fw-bold text-uppercase">
                        {{ request.GET.end_city|default:route.stops.all.last.city.name }}
                    </div>
                    <div class="text-white-50 small">Прибуття</div>
                </div>
            </div>

            <div class="mt-4 d-flex gap-3 px-md-4">
                <span class="badge bg-primary bg-opacity-10 text-info border border-info-subtle px-3 py-2">
                    <i class="fas fa-bus-alt me-2"></i>
                    {% if route.carrier.carrier_profile.company_name %}{{ route.carrier.carrier_profile.company_name }}{% else %}{{ route.carrier.username }}{% endif %}
                </span>

            </div>
        </div>

        <div class="col-lg-4 p-4 bg-opacity-20 d-flex flex-column justify-content-center align-items-center text-center border-start border-light border-opacity-10">
            <div class="price-container mb-4">
                <span class="text-white-50 small d-block mb-1">Вартість одного пасажира:</span>
                <div class="display-5 text-white fw-bold mb-0"> ₴{% if route.calculated_distance %}{{ route.final_price|floatformat:0 }}{% else %}{{ route.min_trip_price|floatformat:0 }}{% endif %}
                </div>

            </div>

            {% if not user.is_carrier %}
<a href="{% url 'make_booking' route_id=route.id %}?date={{ request.GET.date }}&start_city={{ request.GET.start_city }}&end_city={{ request.GET.end_city }}&price={{ route.final_price|floatformat:0 }}"
   class="btn glass-btn-registration w-100 py-3 fs-5 shadow-glow">
    <i class="fas fa-ticket-alt me-2"></i> ЗАБРОНЮВАТИ
</a>
            {% else %}
                <button class="btn btn-outline-secondary w-100 py-3 disabled opacity-50 border-secondary text-white">
                    Кабінет перевізника
                </button>
            {% endif %}
        </div>
    </div>
</div>